<script setup name="LiveNow">
import { computed } from "vue";
import { useMovies } from "~/composables/useMovies";
import MainLayout from "~/components/MainLayout.vue";

const { movies } = useMovies();

const liveMovies = computed(() => movies.value.filter((m) => m.live));
</script>

<template>
  <MainLayout>
    <div>
      <h2 class="text-3xl font-semibold mb-4">
        <span class="material-icons">live_tv</span> Live now
      </h2>
      <div class="grid gap-4 md:grid-cols-3">
        <div
          v-for="movie in liveMovies"
          :key="movie.id"
          class="bg-white text-black p-4 rounded-xl shadow-xl hover:scale-105 transition"
        >
          <!-- ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û -->
          <img
            :src="movie.image"
            :alt="movie.title"
            class="rounded-lg w-full h-48 object-cover mb-2"
          />

          <!-- ‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏ô‡∏±‡∏á -->
          <h3 class="font-bold text-xl">{{ movie.title }}</h3>

          <!-- ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ -->
          <p class="text-sm text-gray-600 mb-1">{{ movie.description }}</p>

          <!-- ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡∏´‡∏ô‡∏±‡∏á -->
          <p class="text-sm text-gray-500">‚è±Ô∏è {{ movie.length }}</p>

          <!-- ‡∏†‡∏≤‡∏©‡∏≤ -->
          <p class="text-sm text-gray-500">
            <span class="inline-block mr-1">
              <span v-if="movie.language === 'TH'">üîä</span>
              <span v-else-if="movie.language === 'EN'">üîà</span>
            </span>
            ‡∏†‡∏≤‡∏©‡∏≤ {{ movie.language }}
          </p>

          <!-- ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô (‡∏î‡∏≤‡∏ß) -->
          <div class="text-yellow-500 mt-1">
            <span v-for="n in 5" :key="n" class="text-lg">
              {{ n <= movie.rating ? "‚òÖ" : "‚òÜ" }}
            </span>
          </div>

          <!-- ‡πÅ‡∏™‡∏î‡∏á‡∏ß‡πà‡∏≤ Live -->
          <span class="text-red-500 font-semibold block mt-2"
            >üî¥ Live Now!</span
          >
        </div>
      </div>
    </div>
  </MainLayout>
</template>
